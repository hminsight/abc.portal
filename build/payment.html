<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,&#32;initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  <link rel="icon" href="/img/favicon.ico" sizes="32x32">
  <link rel="icon" href="/img/wa-logo.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png"><!-- 180×180 -->
  <link rel="manifest" href="/img/manifest.webmanifest">

  <title>Home</title>

  <!-- <link href="/css/portal-bootstrap5.css" rel="stylesheet" /> -->
  <link href="/css/bootstrap.css" rel="stylesheet" />
  <link href="/css/font-awesome.BootstrapV5.bundle.css" rel="stylesheet" />
  <link href="/css/preform.BootstrapV5.bundle.css" rel="stylesheet" />
  <!-- <link href="/css/thumbnail.css?1715919221554" rel="stylesheet" /> -->
  <link href="/css/theme.css" rel="stylesheet" />
  <link href="/css/portalbasictheme.css" rel="stylesheet" />
  <link href="/css/pcf-style.bundle.css" rel="stylesheet" />
  <link href="/css/pwa-style.bundle.css" rel="stylesheet" />
  <link href="/css/styles.min.css?cache_buster=" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <script src="/js/moment.js"></script>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"
    integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

  <script src="/js/ResourceManager.js"></script>
  <script src="/js/pcf-controls.js"></script>

  <script>
    URI = () => { return 'no idea' }
  </script>
</head>

<body>
<div class=" navbar-expand-xl navbar static-top" style="flex-wrap:wrap;" role="banner">
  <div class="skip-to-content"><a href="#mainContent">Skip to main content</a></div>
  <div class="container custom-container">


    <!--
        div class=" ">
          <div class="xrm-editable-html&#32;xrm-attribute" data-cmstemplate-render-url="/_services/portal/efe1e092-1593-4931-a88d-0dcca64e0130/adx_contentsnippet/e616606c-d2d3-46da-8dfc-649c8fb85f0e/__templates/live-preview/L0Zvcm0vTXVsdGktU3RlcC1Gb3JtLw%3d%3d" data-cmstemplate-url="/_services/portal/efe1e092-1593-4931-a88d-0dcca64e0130/adx_contentsnippet/e616606c-d2d3-46da-8dfc-649c8fb85f0e/__templates/all/L0Zvcm0vTXVsdGktU3RlcC1Gb3JtLw%3d%3d" data-editable-title="Mobile&#32;Header" data-editable-url="/_services/portal/efe1e092-1593-4931-a88d-0dcca64e0130/adx_contentsnippet/e616606c-d2d3-46da-8dfc-649c8fb85f0e/adx_value" data-encoded="false" data-filebrowser-dialog-url="~/xrm-adx/filebrowser.html" data-filebrowser-url="/_services/portal/efe1e092-1593-4931-a88d-0dcca64e0130/elFinder/connector" data-label="Mobile&#32;Header" data-languageContext="English" data-liquid="true" data-xrm-base="/xrm-adx/"><div class="xrm-attribute-value"><a href="~/"><img src="/Logo-sm-64.png" alt="Contoso Limited2" style="width: auto; height: 32px; margin: 0 10px;">
<h1 class="siteTitle custom-sitetitle" style="color:#fff!important">Company name</h1>
</a></div></div>
        </div
      -->
    <div class="navbar-brand navbar-header">
      <div class="xrm-editable-html xrm-attribute"
        data-cmstemplate-render-url="/_services/portal/efe1e092-1593-4931-a88d-0dcca64e0130/adx_contentsnippet/e616606c-d2d3-46da-8dfc-649c8fb85f0e/__templates/live-preview/L0Zvcm0vTXVsdGktU3RlcC1Gb3JtLw%3d%3d"
        data-cmstemplate-url="/_services/portal/efe1e092-1593-4931-a88d-0dcca64e0130/adx_contentsnippet/e616606c-d2d3-46da-8dfc-649c8fb85f0e/__templates/all/L0Zvcm0vTXVsdGktU3RlcC1Gb3JtLw%3d%3d"
        data-editable-title="Mobile Header"
        data-editable-url="/_services/portal/efe1e092-1593-4931-a88d-0dcca64e0130/adx_contentsnippet/e616606c-d2d3-46da-8dfc-649c8fb85f0e/adx_value"
        data-encoded="false" data-filebrowser-dialog-url="~/xrm-adx/filebrowser.html"
        data-filebrowser-url="/_services/portal/efe1e092-1593-4931-a88d-0dcca64e0130/elFinder/connector"
        data-label="Mobile Header" data-languagecontext="English" data-liquid="true" data-xrm-base="/xrm-adx/">
        <div class="xrm-attribute-value"><a href="~/"><img src="/img/Logo-sm-64.png" alt="Contoso Limited2"
              style="width: auto; height: 32px; margin: 0 10px;">
            <h1 class="siteTitle custom-sitetitle">Company name</h1>
          </a></div>
      </div>
    </div>
    <button type="button" class="navbar-toggler collapsed custom-navbar-toggler" title="Toggle navigation"
      data-bs-toggle="collapse" data-bs-target="#navbar" aria-expanded="false" onclick="setHeight();">
      <span class="visually-hidden">Toggle navigation</span>
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="navbar-collapse collapse" style="width: min-content;">


      <nav aria-label="Main Navigation" class="ms-auto menu-bar xrm-entity xrm-editable-adx_weblinkset"
        data-weblinks-maxdepth="2">
        <ul class="nav navbar-nav weblinks">





          <li class=" nav-item weblink ">
            <a aria-label="Home" href="/" aria-roledescription="link" class="nav-link" title="Home">
              Home
            </a>

          </li>


          <li class="nav-item divider-vertical" aria-hidden="true"></li>




          <li class=" nav-item weblink ">
            <a aria-label="Dashboard" href="/Dashboard/" aria-roledescription="link" class="nav-link" title="Dashboard">
              Dashboard
            </a>

          </li>


          <li class="nav-item divider-vertical" aria-hidden="true"></li>




          <li class=" nav-item weblink  dropdown">
            <a aria-label="Form" href="#" role="button" class="dropdown-toggle nav-link" data-bs-toggle="dropdown"
              title="Form" aria-expanded="false">
              Form
            </a>

            <ul class="dropdown-menu">

              <li>
                <a class="dropdown-item" aria-label="Form" aria-roledescription="link" href="/Form/"
                  title="Form">Form</a>
              </li>
              <div class="dropdown-divider"></div>


              <li>
                <a class="dropdown-item" aria-label="Form" aria-roledescription="link" href="/Form/Form/" title="Form">
                  Form
                </a>
              </li>

              <li>
                <a class="dropdown-item" aria-label="Multi Step Form (1)" aria-roledescription="link"
                  href="/Form/Muti-Step-Form-1/" title="Multi Step Form (1)">
                  Multi Step Form (1)
                </a>
              </li>

              <li>
                <a class="dropdown-item" aria-label="Muti Step Form" aria-roledescription="link"
                  href="/Form/Multi-Step-Form/" title="Muti Step Form" aria-current="page">
                  Muti Step Form
                </a>
              </li>

            </ul>

          </li>


          <li class="nav-item divider-vertical" aria-hidden="true"></li>




          <li class=" nav-item weblink  dropdown">
            <a aria-label="Admin" href="#" role="button" class="dropdown-toggle nav-link" data-bs-toggle="dropdown"
              title="Admin" aria-expanded="false">
              Admin
            </a>

            <ul class="dropdown-menu">

              <li>
                <a class="dropdown-item" aria-label="Admin" aria-roledescription="link" href="/Admin/"
                  title="Admin">Admin</a>
              </li>
              <div class="dropdown-divider"></div>


              <li>
                <a class="dropdown-item" aria-label="Admin Information" aria-roledescription="link"
                  href="/Admin/Admin-Information/" title="Admin Information">
                  Admin Information
                </a>
              </li>

            </ul>

          </li>


          <li class="nav-item divider-vertical" aria-hidden="true"></li>




          <li class=" nav-item weblink  dropdown">
            <a aria-label="Examples" href="#" role="button" class="dropdown-toggle nav-link" data-bs-toggle="dropdown"
              title="Examples" aria-expanded="false">
              Examples
            </a>

            <ul class="dropdown-menu">

              <li>
                <a class="dropdown-item" aria-label="Examples" aria-roledescription="link" href="/Examples/"
                  title="Examples">Examples</a>
              </li>
              <div class="dropdown-divider"></div>


              <li>
                <a class="dropdown-item" aria-label="Card Showcase" aria-roledescription="link"
                  href="/Examples/Card-Showcase/" title="Card Showcase">
                  Card Showcase
                </a>
              </li>

              <li>
                <a class="dropdown-item" aria-label="Accordion Showcase" aria-roledescription="link"
                  href="/Examples/Accordion-Showcase/" title="Accordion Showcase">
                  Accordion Showcase
                </a>
              </li>

              <li>
                <a class="dropdown-item" aria-label="Interactive Tabs" aria-roledescription="link"
                  href="/Examples/Interactive-Tabs/" title="Interactive Tabs">
                  Interactive Tabs
                </a>
              </li>

              <li>
                <a class="dropdown-item" aria-label="Alerts" aria-roledescription="link" href="/Examples/Alerts/"
                  title="Alerts">
                  Alerts
                </a>
              </li>

              <li>
                <a class="dropdown-item" aria-label="Link Showcase" aria-roledescription="link"
                  href="/Examples/list-showcase/" title="Link Showcase">
                  Link Showcase
                </a>
              </li>

            </ul>

          </li>



          <li class=" nav-item divider-vertical" aria-hidden="true"></li>
          <li class=" nav-item dropdown">
            <a id="search" class=" nav-link navbar-icon" href="#" data-bs-toggle="dropdown" role="button"
              aria-expanded="false" aria-label="Search" title="Search">
              <span class="glyphicon fa-solid fa-magnifying-glass"></span>
            </a>
            <div class="dropdown-menu dropdown-search">






              <form method="GET" action="/search/" role="search" class="form-search">
                <div class="input-group" style="display:table;">



                  <label for="q" class="visually-hidden">
                    Search
                  </label>
                  <input type="text" class="form-control" id="q" name="q" placeholder="Search" value="" title="Search">
                  <div class="input-group-btn align-top">
                    <button type="submit" class="btn btn-primary" title="Search" aria-label="Search">
                      <span class="fa fa-search" aria-hidden="true"></span>
                    </button>
                  </div>
                </div>
              </form>

            </div>
          </li>






          <li class=" nav-item divider-vertical" aria-hidden="true"></li>

          <li class=" nav-item dropdown">

            <a href="#" class=" nav-link dropdown-toggle" aria-roledescription="link" title="S G"
              data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-label="S G">
              <span class="username">S G</span>
              <span class="caret"></span>
            </a>
            <ul class="dropdown-menu">


              <li><a class="dropdown-item" aria-label="Profile" aria-roledescription="link" href="/profile/">Profile</a>
              </li>

              <li class="dropdown-divider" role="separator" aria-hidden="true"></li>
              <li>
                <a class="dropdown-item" aria-label="Sign out" aria-roledescription="link"
                  href="/Account/Login/LogOff?returnUrl=%2FForm%2FMulti-Step-Form%2F" title="Sign out">
                  Sign out
                </a>
              </li>
            </ul>
          </li>


        </ul>
        <a aria-hidden="true" class="xrm-entity-ref"
          href="/_services/portal/efe1e092-1593-4931-a88d-0dcca64e0130/adx_weblinkset/9f4ddf2d-1d96-4982-8606-9d5274b20167"
          style="display:none;" title="Default"></a><a aria-hidden="true" class="xrm-entity-adx_weblinkset_weblink-ref"
          href="/_services/portal/efe1e092-1593-4931-a88d-0dcca64e0130/adx_weblinkset/9f4ddf2d-1d96-4982-8606-9d5274b20167/__related/adx_weblinkset_weblink"
          style="display:none;"></a><a aria-hidden="true" class="xrm-entity-adx_weblinkset_weblink-update-ref"
          href="/_services/portal/efe1e092-1593-4931-a88d-0dcca64e0130/adx_weblinkset/9f4ddf2d-1d96-4982-8606-9d5274b20167/__related/adx_weblinkset_weblink"
          style="display:none;"></a><a aria-hidden="true" class="xrm-uri-template xrm-entity-adx_weblink-delete-ref"
          href="/_services/portal/efe1e092-1593-4931-a88d-0dcca64e0130/adx_weblink/{Id}/__delete"
          style="display:none;"></a><a aria-hidden="true" class="xrm-entity-adx_webpage-ref"
          href="/_services/portal/efe1e092-1593-4931-a88d-0dcca64e0130/adx_webpage" style="display:none;"></a><a
          aria-hidden="true" class="xrm-entity-adx_publishingstate-ref"
          href="/_services/portal/efe1e092-1593-4931-a88d-0dcca64e0130/adx_publishingstate" style="display:none;"></a>
      </nav>

    </div>
  </div>
</div>



<main class="site-container">









    <script type="text/javascript">
        window.onload = function () {
            if (window.navigator.appName == "Microsoft Internet Explorer" || window.navigator.userAgent.indexOf("Trident") > 0) {
                var searchElement = document.getElementById("search");
                if (searchElement != null) searchElement.setAttribute("href", "");
            }
        };
        function setHeight() {
            var windowHeight = window.innerHeight - 140;
            var navbar = document.getElementById("navbar");
            if (navbar) {
                navbar.style.maxHeight = windowHeight + "px";
            }
        }
        window.addEventListener('resize', function (event) {
            setHeight();
        });
    </script>

















    <script>
        // document.getElementById("txtWorkOrderId").value = '52e6ac85-6142-ef11-a316-002248126705';          
        // alert('52e6ac85-6142-ef11-a316-002248126705');
    </script>


    <div id="mainContent" class="wrapper-body step-template" role="main">

        <div class="py-5 px-4 step-menu-container step-template">
            <div class="step-menu-title"></div>
        </div>
        <div class="page-copy">

            <div class="xrm-editable-html xrm-attribute"
                data-cmstemplate-render-url="/_services/portal/72e9002a-2c42-4d70-b902-0951e0c750c3/adx_webpage/c0fdf266-edc1-b6bd-91b4-3229f1a8eab3/__templates/live-preview/L0Jvb2tpbmdzL01ha2UtUGF5bWVudC8%3d"
                data-cmstemplate-url="/_services/portal/72e9002a-2c42-4d70-b902-0951e0c750c3/adx_webpage/c0fdf266-edc1-b6bd-91b4-3229f1a8eab3/__templates/all/L0Jvb2tpbmdzL01ha2UtUGF5bWVudC8%3d"
                data-editable-title="Copy (Make Payment)"
                data-editable-url="/_services/portal/72e9002a-2c42-4d70-b902-0951e0c750c3/adx_webpage/c0fdf266-edc1-b6bd-91b4-3229f1a8eab3/adx_copy"
                data-encoded="false" data-filebrowser-dialog-url="~/xrm-adx/filebrowser.html"
                data-filebrowser-url="/_services/portal/72e9002a-2c42-4d70-b902-0951e0c750c3/elFinder/connector?working=YWR4X3dlYnBhZ2U6ZmI2ODEzNzgtM2NiNi1hYjYwLTE3YWUtYzVhMmM3NTBlZDA5OkZhbHNl"
                data-label="Copy (Make Payment)" data-liquid="true" data-xrm-base="/xrm-adx/">
                <div class="xrm-attribute-value">
                    <script src="https://paymentgateway.commbank.com.au/static/checkout/checkout.min.js"
                        data-error="errorCallback" data-cancel="cancelCallback" data-complete="completeCallback"
                        data-beforeredirect="Checkout.saveFormFields"
                        data-afterredirect="Checkout.restoreFormFields"></script>
                    <script type="text/javascript">

                        let tesAlertMsg;

                        function errorCallback(error) {
                            console.log(JSON.stringify(error));
                            tesAlertMsg.append('Something went wrong, please try refreshing the page, or check your connection');
                            tesAlertMsg.show(tesAlertMsg.types.DANGER);
                        }
                        function cancelCallback() {
                            let userConfirmation = confirm("Are you sure you want to cancel?");
                            if (confirm(text) == true) {
                                //text = "You pressed OK!";
                                console.log("Payment cancelled");
                                cancelCallback =
                                    "https://tesssbld.powerappsportals.com/Bookings/Make-Payment/";
                            } else {
                                //text = "You canceled!";
                                console.log("Payment NOT cancelled");
                            }
                        }


                        function completeCallback(response, data) {
                            console.log("response:", response);
                            console.log("resultIndicator: ", response.resultIndicator);
                            console.log("sessionVersion: ", response.sessionVersion);

                            UpdatePaymentRecord();
                        }

                        function showPaymentPage(sessionid) {
                            Checkout.configure({
                                session: {
                                    id: sessionid,
                                },
                            });
                            Checkout.showPaymentPage();
                        }

                        function showEmbeddedPage(sessionid) {
                            // Initialise the alert 
                            tesAlertMsg = new portal_common.PortalAlert();
                            Checkout.configure({
                                session: {
                                    id: sessionid,
                                },
                            });
                            Checkout.showEmbeddedPage("#embed-target");
                            document.getElementById("btnEmbedpayment").style.visibility = "hidden";
                        }

                        function UpdatePaymentRecord() {
                            fetch(
                                "https://prod-11.australiasoutheast.logic.azure.com:443/workflows/7fc39021160d4dcfbfc246287d8f8485/triggers/manual/paths/invoke?api-version=2016-06-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=a5lN8KOffWWAGBgAoMmFmWNCwEbIVRVO_YdF0Gc5eOg",
                                {
                                    method: "POST",
                                    headers: {
                                        "Content-Type": "application/json", //,
                                        //'Authorization': 'Bearer YOUR_ACCESS_TOKEN'
                                    },
                                    body: JSON.stringify({
                                        InvoiceNumber: document.getElementById("txt_tes_invoiceno").value,
                                        workOrderID: document.getElementById("txt_tes_WorkOrderNo").value,
                                        Amount: Number(document.getElementById("txt_tes_Totalprice").value),
                                        Currency: "AUD",
                                    }),
                                }
                            )
                                .then((response) => {
                                    console.log(response);
                                    tesAlertMsg.append('Thank you, your payment has been successful. Please note it can take 30 minutes for the booking status to update to "Paid"');
                                    tesAlertMsg.show(tesAlertMsg.types.SUCCESS);
                                }
                                )
                                .then((data) => { console.log(data) })
                                .catch((error) => {
                                    console.error("Error:", error)
                                    tesAlertMsg.append('Something went wrong, please try refreshing the page, or check your connection');
                                    tesAlertMsg.show(tesAlertMsg.types.DANGER);
                                });
                        }


                    </script>
                    <!-- Payment alery messages -->

                    <!-- End payment alert messages -->
                    <div class="row sectionBlockLayout text-start"
                        style="display: flex; flex-wrap: wrap; margin: 0px; min-height: auto; padding: 8px;">
                        <div class="container">
                            <div class="col-lg-12 columnBlockLayout"
                                style="flex-grow: 1; display: flex; flex-direction: column; min-width: 250px; word-break: break-word;">
                                <div class="alert-container show" portal-alert="">
                                    <div class="alert alert-success" role="alert">
                                        <i aria-hidden="true" class="fa fa-circle-check" style=""></i>
                                        <div class="alert-content">
                                            <p>Thank you, your payment has been successful. Please note it can take 30
                                                minutes for the booking status to update to "Paid"</p>
                                        </div>
                                        <button type="button" class="close" aria-label="Close">
                                            <span aria-hidden="true">×</span>
                                        </button>
                                    </div>
                                </div>
                                <h1> Make Payment </h1>

                                <table id="iu9x7i" data-gjs-type="table" data-highlightable="1" role="presentation"
                                    class="section">
                                    <colgroup id="ixk3y2" data-gjs-type="default">
                                        <col id="ioog8b" data-gjs-type="default">
                                        <col id="i4awa6" data-gjs-type="default">
                                    </colgroup>
                                    <tbody id="i2vx1x" data-gjs-type="tbody" data-highlightable="1">
                                        <tr id="iuv4vk" data-gjs-type="row" data-highlightable="1">
                                            <td data-highlightable="1" colspan="1" rowspan="1" data-format-type="None"
                                                data-entity-form-field-pcf-enabled="false"
                                                class="clearfix cell text form-control-cell"
                                                style="position: relative;">
                                                <div class="table-info required">
                                                    <label for="txt_tes_invoiceno" class="field-label">Invoice
                                                        Number</label>
                                                </div>
                                                <div class="control">
                                                    <div style="position:relative">
                                                        <input type="text" id="txt_tes_invoiceno"
                                                            style="padding:16px; margin:10px 0px;"
                                                            class="aspNetDisabled text form-control lookup form-control "
                                                            readonly="" aria-readonly="true" disabled="">
                                                    </div>
                                                </div>
                                            </td>
                                            <td data-highlightable="1" colspan="1" rowspan="1" data-format-type="None"
                                                data-entity-form-field-pcf-enabled="false"
                                                style="padding:16px; margin:10px 0px;"
                                                class="clearfix cell text form-control-cell">
                                                <div class="table-info required">
                                                    <label for="txt_tes_WorkOrderNo" class="field-label">Work Order
                                                        Number</label>
                                                </div>
                                                <div class="control">
                                                    <div style="position:relative">
                                                        <input type="text" id="txt_tes_WorkOrderNo"
                                                            style="padding:16px; margin:10px 0px;"
                                                            class="aspNetDisabled text form-control lookup form-control "
                                                            readonly="" aria-readonly="true" disabled="">
                                                    </div>
                                                </div>
                                            </td>

                                        </tr>


                                        <tr id="iuv4vk2" data-gjs-type="row" data-highlightable="1">
                                            <td data-highlightable="1" colspan="1" rowspan="1" data-format-type="None"
                                                data-entity-form-field-pcf-enabled="false"
                                                class="clearfix cell text form-control-cell"
                                                style="position: relative;">
                                                <div class="table-info required">
                                                    <label for="txt_tes_subtotalprice" class="field-label">Sub Total
                                                        Price</label>
                                                </div>
                                                <div class="control">
                                                    <div style="position:relative">
                                                        <input type="text" id="txt_tes_subtotalprice"
                                                            style="padding:16px; margin:10px 0px;"
                                                            class="aspNetDisabled text form-control lookup form-control "
                                                            readonly="" aria-readonly="true" disabled="">
                                                    </div>
                                                </div>
                                            </td>
                                            <td data-highlightable="1" colspan="1" rowspan="1" data-format-type="None"
                                                data-entity-form-field-pcf-enabled="false"
                                                style="padding:16px; margin:10px 0px;"
                                                class="clearfix cell text form-control-cell">
                                                <div class="table-info required">
                                                    <label for="txt_tes_Gst" class="field-label">GST</label>
                                                </div>
                                                <div class="control">
                                                    <div style="position:relative">
                                                        <input type="text" id="txt_tes_Gst"
                                                            style="padding:16px; margin:10px 0px;"
                                                            class="aspNetDisabled text form-control lookup form-control "
                                                            readonly="" aria-readonly="true" disabled="">
                                                    </div>
                                                </div>
                                            </td>

                                        </tr>
                                        <tr id="iuv4vk" data-gjs-type="row" data-highlightable="1">
                                            <td data-highlightable="1" colspan="1" rowspan="1" data-format-type="None"
                                                data-entity-form-field-pcf-enabled="false"
                                                class="clearfix cell text form-control-cell"
                                                style="position: relative;">
                                                <div class="table-info required">
                                                    <label for="txt_tes_Totalprice" class="field-label">Total
                                                        Price</label>
                                                </div>
                                                <div class="control">
                                                    <div style="position:relative">
                                                        <input type="text" id="txt_tes_Totalprice"
                                                            style="padding:16px; margin:10px 0px;"
                                                            class="aspNetDisabled text form-control lookup form-control "
                                                            readonly="" aria-readonly="true" disabled="">
                                                    </div>
                                                </div>
                                            </td>
                                            <td data-highlightable="1" colspan="1" rowspan="1" data-format-type="None"
                                                data-entity-form-field-pcf-enabled="false"
                                                class="clearfix cell text form-control-cell"
                                                style="position: relative;">

                                            </td>

                                        </tr>



                                    </tbody>
                                </table>

                                <label hidden="" for="txt_SESSIONID">SESSIONID</label><input hidden="" type="text"
                                    id="txt_SESSIONID" name="txt_SESSIONID"><br><br>


                                <div id="embed-target"
                                    style="width: 100%; max-height: 500px; overflow: hidden; transition: max-height 0.5s ease-out 0s;">
                                    <iframe id="hc-comms-layer-iframe" allow="payment"
                                        title="Payment Page Embedded In Frame"
                                        src="https://paymentgateway.commbank.com.au/static/checkout/landing/index.html"
                                        style="z-index: 9999; display: block; background-color: transparent; border: 0px none transparent; overflow: hidden; visibility: visible; margin: 0px; padding: 0px; height: 500px; width: 100%; min-height: 668px;"
                                        scrolling="no" class=""></iframe>
                                </div>
                                <div id="receiptContainer" style="width:100%"></div>

                                <input type="button"
                                    style="background-color: rgb(50, 49, 48); color: rgb(255, 255, 255); cursor: pointer; font-weight: bold; height: 40px; visibility: hidden;"
                                    class="btn btn-primary" id="btnEmbedpayment" value="Pay Now"
                                    onclick="showEmbeddedPage(document.getElementById('txt_SESSIONID').value);">
                                <input type="button" class="btn btn-primary" hidden="" value="Pay with Payment Page"
                                    onclick="showEmbeddedPage(document.getElementById('txt_SESSIONID').value);">
                                <div class="row sectionBlockLayout text-start"
                                    style="display: flex; flex-wrap: wrap; margin: 0px; min-height: auto; padding: 8px;">
                                    <div class="container" style="padding: 0px; display: flex; flex-wrap: wrap;">
                                        <div class="col-lg-12 columnBlockLayout"
                                            style="flex-grow: 1; display: flex; flex-direction: column; min-width: 250px; word-break: break-word;">
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <script type="text/javascript">
        //<![CDATA[
        $(document).ready(function () {
            $('.wrapper-body').addClass('step-template');
        });
        //]]>
    </script>















    <script>

        //Relete this once Function App is implemented
        function Verify() {
            fetch('https://prod-19.australiasoutheast.logic.azure.com:443/workflows/9cef09b1f80c45f6bb13fee5cab95a90/triggers/manual/paths/invoke?api-version=2016-06-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=29ClWG9xVdMhYaoM4GMkmojzZvan-l28JpbV2mhkMG4', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    "apiOperation": "INITIATE_CHECKOUT",
                    "interaction": {
                        "operation": "VERIFY",
                        "merchant": {
                            "name": "MAIN ROADS WESTERN AUSTRALIA"
                        }
                    },
                    "order": {
                        "currency": "AUD",
                        "amount": document.getElementById('txt_tes_Totalprice').value,
                        "id": document.getElementById('txt_tes_invoiceno').value,
                        "description": document.getElementById('txt_tes_WorkOrderNo').value
                    }
                })
            })
                .then(body => { //response.json(); 
                    console.log(body)
                }
                )
                .then(response => { //response.json(); 
                    console.log(response)
                }
                )
                .then(data => {
                    console.log(data)
                    //document.getElementById('txt_tes_WorkOrderNo').value=data.session.id
                }
                )
                .catch(error => console.error('Error:', error));

        }


        async function GetSessionID() {
            const url = "https://prod-19.australiasoutheast.logic.azure.com:443/workflows/9cef09b1f80c45f6bb13fee5cab95a90/triggers/manual/paths/invoke?api-version=2016-06-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=29ClWG9xVdMhYaoM4GMkmojzZvan-l28JpbV2mhkMG4";
            const data = {
                "apiOperation": "INITIATE_CHECKOUT",
                "interaction": {
                    "operation": "PURCHASE", //"VERIFY",
                    "merchant": {
                        "name": "MAIN ROADS WESTERN AUSTRALIA"//,
                        //    ,
                        //"url": "https://tesssbld.powerappsportals.com/"
                        ,
                        // "logo": "https://upload.wikimedia.org/wikipedia/commons/2/21/Verlagsgruppe_Random_House_Logo_2016.png"
                        //"emailContact": ''
                    },
                    "displayControl": {
                        "billingAddress": "HIDE",
                        "customerEmail": "READ_ONLY"//,
                        // "paymentMethodDisplay": {
                        //         "visa": "show",
                        //       "mastercard": "show",
                        //       "amex": "show",
                        //   "dinersclub": "HIDE"//,
                        //       "discover": "show",
                        //       "jcb": "show",
                        //       "maestro": "show"
                        //        }
                    }
                },
                "order": {
                    "currency": "AUD",
                    "amount": document.getElementById('txt_tes_Totalprice').value,
                    "id": document.getElementById('txt_tes_invoiceno').value,
                    "description": document.getElementById('txt_tes_WorkOrderNo').value
                },
                "customer": {
                    "email": "steven.green@insight.com",
                    "firstName": "Steven",
                    "lastName": "Green"
                    //,
                    //"mobilePhone": "+1 5557891230",
                    // "phone": "+1 1234567890"
                }
                //,
                //"displayControl": {
                //"billingAddress": "HIDE",
                //"customerEmail": "MANDATORY"
                //}
            };

            try {
                const response = await fetch(url, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(data)
                });

                if (response.ok) {
                    const result = await response.text();
                    console.log("Response:", result);
                    let d = JSON.parse(result)
                    //document.getElementById("response").innerText = result;
                    document.getElementById('txt_SESSIONID').value = d.session.id;
                    //Checkout.showEmbeddedPage('#receiptContainer');
                } else {
                    console.error("HTTP Error:", response.status, response.statusText);
                }
            } catch (error) {
                console.error("Fetch Error:", error);
            }
        }



        function roundToTwo(num) {
            return +(Math.round(num + "e+2") + "e-2");
        }


        document.addEventListener("DOMContentLoaded", function (event) {
            // alert("Your page is loaded");
            // document.getElementById("txtWorkOrderId").value = '52e6ac85-6142-ef11-a316-002248126705';
            document.getElementById("txt_tes_subtotalprice").value = parseFloat(11700.0000000000).toFixed(2);
            document.getElementById("txt_tes_invoiceno").value = 'INV0000212';

            document.getElementById("txt_tes_WorkOrderNo").value = 'WO0050084';
            document.getElementById("txt_tes_Gst").value = parseFloat(1170.0000000000).toFixed(2);
            document.getElementById("txt_tes_Totalprice").value = parseFloat(12870.0000000000).toFixed(2);

            GetSessionID();


            //do work
        });

    </script>

</main>

</main><!-- Closing main element -->
<footer role="contentinfo" class="footer">
  <div class="footer-bottom d-print-none">
    <div class="container">
      <div class="row">
        <div class="col-lg-9 col-md-9 col-sm-9 text-start">
          <div class="xrm-editable-html&#32;xrm-attribute" data-languageContext="English">
            <div class="xrm-attribute-value">
              <p>Copyright © 2024. All rights reserved.</p>
            </div>
          </div>
        </div>
        <div id="accessibilityLinkContainer" class="col-lg-3 col-md-3 col-sm-3 text-end"></div>

      </div>
    </div>
  </div>
</footer>
<script src="https://content.powerapps.com/resource/powerappsportal/dist/bootstrap.BootstrapV5.bundle-be8391e97d.js"
    type="text/javascript"></script>

<script src="https://content.powerapps.com/resource/powerappsportal/dist/postpreform.BootstrapV5.bundle-11a5a91493.js"
    type="text/javascript"></script>

<script src="https://content.powerapps.com/resource/powerappsportal/dist/app.BootstrapV5.bundle-7aa0129ad7.js"
    type="text/javascript"></script>

<script
    src="https://content.powerapps.com/resource/powerappsportal/dist/default-1033.moment_2_29_4.bundle-eda4e638fd.js"
    type="text/javascript"></script>
<script
    src="https://content.powerapps.com/resource/powerappsportal/dist/default-1033.moment_2_29_4.bundle-eda4e638fd.js"
    type="text/javascript"></script>


<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.2.2/js/bootstrap.min.js"
    integrity="sha512-5BqtYqlWfJemW5+v+TZUs22uigI8tXeVah5S/1Z6qBLVO7gakAOtkOzUtgq6dsIo5c0NJdmGPs0H9I+2OHUHVQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script> -->


<script type="text/javascript">
    window.onload = function () {
        if (window.navigator.appName == "Microsoft Internet Explorer" || window.navigator.userAgent.indexOf("Trident") > 0) {
            var searchElement = document.getElementById("search");
            if (searchElement != null) searchElement.setAttribute("href", "");
        }
    };
    function setHeight() {
        var windowHeight = window.innerHeight - 140;
        var navbar = document.getElementById("navbar");
        if (navbar) {
            navbar.style.maxHeight = windowHeight + "px";
        }
    }
    window.addEventListener('resize', function (event) {
        setHeight();
    });
</script>

<script src="js/main.js"></script>
</body>

</html>