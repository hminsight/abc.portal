<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,&#32;initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  <link rel="icon" href="/img/favicon.ico" sizes="32x32">
  <link rel="icon" href="/img/wa-logo.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png"><!-- 180×180 -->
  <link rel="manifest" href="/img/manifest.webmanifest">

  <title>Home</title>

  <!-- Preload Open Sans fonts for better performance -->
  <link rel="preload" href="/fonts/OpenSans-Regular.ttf" as="font" type="font/ttf" crossorigin>
  <link rel="preload" href="/fonts/OpenSans-Bold.ttf" as="font" type="font/ttf" crossorigin>
  <link rel="preload" href="/fonts/OpenSans-SemiBold.ttf" as="font" type="font/ttf" crossorigin>

  <!-- <link href="/css/portal-bootstrap5.css" rel="stylesheet" /> -->
  <link href="/css/bootstrap.css" rel="stylesheet" />
  <link href="/css/font-awesome.BootstrapV5.bundle.css" rel="stylesheet" />
  <link href="/css/preform.BootstrapV5.bundle.css" rel="stylesheet" />
  <!-- <link href="/css/thumbnail.css?1715919221554" rel="stylesheet" /> -->
  <link href="/css/theme.css" rel="stylesheet" />
  <link href="/css/portalbasictheme.css" rel="stylesheet" />
  <link href="/css/pcf-style.bundle.css" rel="stylesheet" />
  <link href="/css/pwa-style.bundle.css" rel="stylesheet" />
  <link href="/css/main.min.css?v=2" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <script src="/js/moment.js"></script>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"
    integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

  <script src="/js/ResourceManager.js"></script>
  <script src="/js/pcf-controls.js"></script>

  <script>
    URI = () => { return 'no idea' }
  </script>
</head>

<body>
<!--
  ============================================================================
  UNIFIED HEADER COMPONENT
  ============================================================================
  This single header serves both authenticated and unauthenticated users.
  
  Design References:
  - Top Menu: Figma node 2:475
  - Banner Menu: Figma node 2:555
  - Unauthenticated: Figma node 56:5242 (shows "Login" button)
  - Authenticated: Figma node 681:30024 (shows "Logout" button)
  
  Conditional Logic:
  - Uses Liquid template syntax: {% if user.isAnonymous %}
  - Shows "Login" button for unauthenticated users
  - Shows "Logout" button for authenticated users
  - All other elements remain identical across both states
  
  Structure:
  1. Top Menu Bar (separate include: _top-menu.html)
  2. Banner Menu (Logo + Login/Logout + Menu button)
  3. Off-canvas Menu (slides from right)
  ============================================================================
-->

<!--
  ============================================================================
  TOP MENU BAR COMPONENT
  ============================================================================
  Utility navigation bar at the very top of the page.
  
  Design Reference: Figma node 2:475
  
  Features:
  - Fixed height: 72px
  - Background: teal-extra-dark (#002A36)
  - Links: Dashboard, Language help, Contact us, Search, Agency website
  - Font: Semibold 17px
  - Icons: 18px height, 20px width
  - External link separated with left border
  ============================================================================
-->

<div class="top-menu" data-node-id="2:475">
  <div class="container-fluid">
    <div class="top-menu-items" data-node-id="2:481">
      <a href="/dashboard" class="top-menu-button" data-node-id="2:434">
        <i class="fa-solid fa-home-alt"></i>
        <span>Dashboard</span>
      </a>
      <a href="/language-help" class="top-menu-button" data-node-id="2:436">
        <i class="fa-solid fa-language"></i>
        <span>Language help</span>
      </a>
      <a href="/contact" class="top-menu-button" data-node-id="2:437">
        <i class="fa-solid fa-comments"></i>
        <span>Contact us</span>
      </a>
      <a href="/search" class="top-menu-button" data-node-id="1369:20043">
        <i class="fa-solid fa-magnifying-glass"></i>
        <span>Search</span>
      </a>
      <a href="https://agency.example.com" class="top-menu-button top-menu-button--external" target="_blank" rel="noopener noreferrer" data-node-id="2:438">
        <i class="fa-solid fa-arrow-up-right-from-square"></i>
        <span>Agency website</span>
      </a>
    </div>
  </div>
</div>


<!-- Main Banner Menu -->
<div class="banner-menu" role="banner" data-node-id="2:555">
  <div class="skip-to-content"><a href="#mainContent">Skip to main content</a></div>
  <div class="container-fluid">
    <div class="d-flex align-items-center justify-content-between px-3 px-lg-5" style="padding-top: var(--banner-padding-y); padding-bottom: var(--banner-padding-y);">
      <!-- Logo -->
      <div class="banner-logo" data-node-id="2:551">
        <a href="~/" class="text-decoration-none d-block">
          <div class="banner-logo__text">ABC</div>
          <div class="banner-logo__text-bold">Online Portal</div>
        </a>
      </div>
      
      <!-- Action Buttons -->
      <div class="d-flex banner-actions align-items-center" data-node-id="2:530">
        <!-- 
          POWER PAGES: Uncomment the Liquid code below and remove the static buttons
          LOCAL TESTING: Both buttons shown for testing - works fine locally
        -->
        
        <!-- Liquid version (for Power Pages) - UNCOMMENT WHEN DEPLOYING:
        {% if user.isAnonymous %}
          <a href="/login" class="btn btn-primary rounded-pill">Login</a>
        {% else %}
          <a href="/logout" class="btn btn-primary rounded-pill">Logout</a>
        {% endif %}
        -->
        
        <!-- Static version (for local testing) - REMOVE WHEN DEPLOYING: -->
        <a href="/dashboard.html" class="btn btn-primary rounded-pill">Login</a>
        <a href="/" class="btn btn-primary rounded-pill">Logout</a>
        
        <button type="button" class="btn btn-secondary rounded-pill" 
                data-bs-toggle="offcanvas" data-bs-target="#navbarOffcanvas" 
                aria-controls="navbarOffcanvas" data-node-id="2:512">
          <span class="fa-solid fa-bars"></span>
          <span>Menu</span>
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Off-canvas Menu (outside banner-menu for proper positioning) -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="navbarOffcanvas" aria-labelledby="navbarOffcanvasLabel" data-bs-backdrop="true" data-bs-scroll="true">
  <div class="offcanvas-header">
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close">
      <span class="fa-solid fa-xmark" aria-hidden="true"></span>
    </button>
  </div>
  <div class="offcanvas-body">
    <nav aria-label="Main Navigation">
      <ul class="nav flex-column">
        <li class="nav-item">
          <a href="/" class="nav-link" title="Home">Home</a>
        </li>
        <li class="nav-item">
          <a href="/dashboard.html" class="nav-link" title="Dashboard">Dashboard</a>
        </li>
        <li class="nav-item">
          <a href="#" class="nav-link submenu-trigger" data-submenu="examplesSubmenu" title="Examples">
            <span>Examples</span>
          </a>
        </li>
      </ul>
    </nav>
  </div>
</div>

<!-- Second Off-canvas Menu for Examples Submenu -->
<div class="offcanvas offcanvas-end offcanvas-submenu" tabindex="-1" id="examplesSubmenu" aria-labelledby="examplesSubmenuLabel" data-bs-backdrop="false">
  <div class="offcanvas-header">
    <button type="button" class="btn-back" data-bs-dismiss="offcanvas" aria-label="Back">
      <span class="fa-solid fa-chevron-left" aria-hidden="true"></span>
      <span>Examples</span>
    </button>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-close-all="true" aria-label="Close">
      <span class="fa-solid fa-xmark" aria-hidden="true"></span>
    </button>
  </div>
  <div class="offcanvas-body">
    <nav aria-label="Examples Navigation">
      <ul class="nav flex-column">
        <li class="nav-item">
          <a class="nav-link" href="/Examples/">Examples</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/Examples/Card-Showcase/">Card Showcase</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/Examples/Accordion-Showcase/">Accordion Showcase</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/Examples/Interactive-Tabs/">Interactive Tabs</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/Examples/Alerts/">Alerts</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/Examples/list-showcase/">Link Showcase</a>
        </li>
      </ul>
    </nav>
  </div>
</div>



<main class="site-container">









    <script type="text/javascript">
        window.onload = function () {
            if (window.navigator.appName == "Microsoft Internet Explorer" || window.navigator.userAgent.indexOf("Trident") > 0) {
                var searchElement = document.getElementById("search");
                if (searchElement != null) searchElement.setAttribute("href", "");
            }
        };
        function setHeight() {
            var windowHeight = window.innerHeight - 140;
            var navbar = document.getElementById("navbar");
            if (navbar) {
                navbar.style.maxHeight = windowHeight + "px";
            }
        }
        window.addEventListener('resize', function (event) {
            setHeight();
        });
    </script>

















    <script>
        // document.getElementById("txtWorkOrderId").value = '52e6ac85-6142-ef11-a316-002248126705';          
        // alert('52e6ac85-6142-ef11-a316-002248126705');
    </script>


    <div id="mainContent" class="wrapper-body step-template" role="main">

        <div class="py-5 px-4 step-menu-container step-template">
            <div class="step-menu-title"></div>
        </div>
        <div class="page-copy">

            <div class="xrm-editable-html xrm-attribute"
                data-cmstemplate-render-url="/_services/portal/72e9002a-2c42-4d70-b902-0951e0c750c3/adx_webpage/c0fdf266-edc1-b6bd-91b4-3229f1a8eab3/__templates/live-preview/L0Jvb2tpbmdzL01ha2UtUGF5bWVudC8%3d"
                data-cmstemplate-url="/_services/portal/72e9002a-2c42-4d70-b902-0951e0c750c3/adx_webpage/c0fdf266-edc1-b6bd-91b4-3229f1a8eab3/__templates/all/L0Jvb2tpbmdzL01ha2UtUGF5bWVudC8%3d"
                data-editable-title="Copy (Make Payment)"
                data-editable-url="/_services/portal/72e9002a-2c42-4d70-b902-0951e0c750c3/adx_webpage/c0fdf266-edc1-b6bd-91b4-3229f1a8eab3/adx_copy"
                data-encoded="false" data-filebrowser-dialog-url="~/xrm-adx/filebrowser.html"
                data-filebrowser-url="/_services/portal/72e9002a-2c42-4d70-b902-0951e0c750c3/elFinder/connector?working=YWR4X3dlYnBhZ2U6ZmI2ODEzNzgtM2NiNi1hYjYwLTE3YWUtYzVhMmM3NTBlZDA5OkZhbHNl"
                data-label="Copy (Make Payment)" data-liquid="true" data-xrm-base="/xrm-adx/">
                <div class="xrm-attribute-value">
                    <script src="https://paymentgateway.commbank.com.au/static/checkout/checkout.min.js"
                        data-error="errorCallback" data-cancel="cancelCallback" data-complete="completeCallback"
                        data-beforeredirect="Checkout.saveFormFields"
                        data-afterredirect="Checkout.restoreFormFields"></script>
                    <script type="text/javascript">

                        let tesAlertMsg;

                        function errorCallback(error) {
                            console.log(JSON.stringify(error));
                            tesAlertMsg.append('Something went wrong, please try refreshing the page, or check your connection');
                            tesAlertMsg.show(tesAlertMsg.types.DANGER);
                        }
                        function cancelCallback() {
                            let userConfirmation = confirm("Are you sure you want to cancel?");
                            if (confirm(text) == true) {
                                //text = "You pressed OK!";
                                console.log("Payment cancelled");
                                cancelCallback =
                                    "https://tesssbld.powerappsportals.com/Bookings/Make-Payment/";
                            } else {
                                //text = "You canceled!";
                                console.log("Payment NOT cancelled");
                            }
                        }


                        function completeCallback(response, data) {
                            console.log("response:", response);
                            console.log("resultIndicator: ", response.resultIndicator);
                            console.log("sessionVersion: ", response.sessionVersion);

                            UpdatePaymentRecord();
                        }

                        function showPaymentPage(sessionid) {
                            Checkout.configure({
                                session: {
                                    id: sessionid,
                                },
                            });
                            Checkout.showPaymentPage();
                        }

                        function showEmbeddedPage(sessionid) {
                            // Initialise the alert 
                            tesAlertMsg = new portal_common.PortalAlert();
                            Checkout.configure({
                                session: {
                                    id: sessionid,
                                },
                            });
                            Checkout.showEmbeddedPage("#embed-target");
                            document.getElementById("btnEmbedpayment").style.visibility = "hidden";
                        }

                        function UpdatePaymentRecord() {
                            fetch(
                                "https://prod-11.australiasoutheast.logic.azure.com:443/workflows/7fc39021160d4dcfbfc246287d8f8485/triggers/manual/paths/invoke?api-version=2016-06-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=a5lN8KOffWWAGBgAoMmFmWNCwEbIVRVO_YdF0Gc5eOg",
                                {
                                    method: "POST",
                                    headers: {
                                        "Content-Type": "application/json", //,
                                        //'Authorization': 'Bearer YOUR_ACCESS_TOKEN'
                                    },
                                    body: JSON.stringify({
                                        InvoiceNumber: document.getElementById("txt_tes_invoiceno").value,
                                        workOrderID: document.getElementById("txt_tes_WorkOrderNo").value,
                                        Amount: Number(document.getElementById("txt_tes_Totalprice").value),
                                        Currency: "AUD",
                                    }),
                                }
                            )
                                .then((response) => {
                                    console.log(response);
                                    tesAlertMsg.append('Thank you, your payment has been successful. Please note it can take 30 minutes for the booking status to update to "Paid"');
                                    tesAlertMsg.show(tesAlertMsg.types.SUCCESS);
                                }
                                )
                                .then((data) => { console.log(data) })
                                .catch((error) => {
                                    console.error("Error:", error)
                                    tesAlertMsg.append('Something went wrong, please try refreshing the page, or check your connection');
                                    tesAlertMsg.show(tesAlertMsg.types.DANGER);
                                });
                        }


                    </script>
                    <!-- Payment alery messages -->

                    <!-- End payment alert messages -->
                    <div class="row sectionBlockLayout text-start"
                        style="display: flex; flex-wrap: wrap; margin: 0px; min-height: auto; padding: 8px;">
                        <div class="container">
                            <div class="col-lg-12 columnBlockLayout"
                                style="flex-grow: 1; display: flex; flex-direction: column; min-width: 250px; word-break: break-word;">
                                <div class="alert-container show" portal-alert="">
                                    <div class="alert alert-success" role="alert">
                                        <i aria-hidden="true" class="fa fa-circle-check" style=""></i>
                                        <div class="alert-content">
                                            <p>Thank you, your payment has been successful. Please note it can take 30
                                                minutes for the booking status to update to "Paid"</p>
                                        </div>
                                        <button type="button" class="close" aria-label="Close">
                                            <span aria-hidden="true">×</span>
                                        </button>
                                    </div>
                                </div>
                                <h1> Make Payment </h1>

                                <table id="iu9x7i" data-gjs-type="table" data-highlightable="1" role="presentation"
                                    class="section">
                                    <colgroup id="ixk3y2" data-gjs-type="default">
                                        <col id="ioog8b" data-gjs-type="default">
                                        <col id="i4awa6" data-gjs-type="default">
                                    </colgroup>
                                    <tbody id="i2vx1x" data-gjs-type="tbody" data-highlightable="1">
                                        <tr id="iuv4vk" data-gjs-type="row" data-highlightable="1">
                                            <td data-highlightable="1" colspan="1" rowspan="1" data-format-type="None"
                                                data-entity-form-field-pcf-enabled="false"
                                                class="clearfix cell text form-control-cell"
                                                style="position: relative;">
                                                <div class="table-info required">
                                                    <label for="txt_tes_invoiceno" class="field-label">Invoice
                                                        Number</label>
                                                </div>
                                                <div class="control">
                                                    <div style="position:relative">
                                                        <input type="text" id="txt_tes_invoiceno"
                                                            style="padding:16px; margin:10px 0px;"
                                                            class="aspNetDisabled text form-control lookup form-control "
                                                            readonly="" aria-readonly="true" disabled="">
                                                    </div>
                                                </div>
                                            </td>
                                            <td data-highlightable="1" colspan="1" rowspan="1" data-format-type="None"
                                                data-entity-form-field-pcf-enabled="false"
                                                style="padding:16px; margin:10px 0px;"
                                                class="clearfix cell text form-control-cell">
                                                <div class="table-info required">
                                                    <label for="txt_tes_WorkOrderNo" class="field-label">Work Order
                                                        Number</label>
                                                </div>
                                                <div class="control">
                                                    <div style="position:relative">
                                                        <input type="text" id="txt_tes_WorkOrderNo"
                                                            style="padding:16px; margin:10px 0px;"
                                                            class="aspNetDisabled text form-control lookup form-control "
                                                            readonly="" aria-readonly="true" disabled="">
                                                    </div>
                                                </div>
                                            </td>

                                        </tr>


                                        <tr id="iuv4vk2" data-gjs-type="row" data-highlightable="1">
                                            <td data-highlightable="1" colspan="1" rowspan="1" data-format-type="None"
                                                data-entity-form-field-pcf-enabled="false"
                                                class="clearfix cell text form-control-cell"
                                                style="position: relative;">
                                                <div class="table-info required">
                                                    <label for="txt_tes_subtotalprice" class="field-label">Sub Total
                                                        Price</label>
                                                </div>
                                                <div class="control">
                                                    <div style="position:relative">
                                                        <input type="text" id="txt_tes_subtotalprice"
                                                            style="padding:16px; margin:10px 0px;"
                                                            class="aspNetDisabled text form-control lookup form-control "
                                                            readonly="" aria-readonly="true" disabled="">
                                                    </div>
                                                </div>
                                            </td>
                                            <td data-highlightable="1" colspan="1" rowspan="1" data-format-type="None"
                                                data-entity-form-field-pcf-enabled="false"
                                                style="padding:16px; margin:10px 0px;"
                                                class="clearfix cell text form-control-cell">
                                                <div class="table-info required">
                                                    <label for="txt_tes_Gst" class="field-label">GST</label>
                                                </div>
                                                <div class="control">
                                                    <div style="position:relative">
                                                        <input type="text" id="txt_tes_Gst"
                                                            style="padding:16px; margin:10px 0px;"
                                                            class="aspNetDisabled text form-control lookup form-control "
                                                            readonly="" aria-readonly="true" disabled="">
                                                    </div>
                                                </div>
                                            </td>

                                        </tr>
                                        <tr id="iuv4vk" data-gjs-type="row" data-highlightable="1">
                                            <td data-highlightable="1" colspan="1" rowspan="1" data-format-type="None"
                                                data-entity-form-field-pcf-enabled="false"
                                                class="clearfix cell text form-control-cell"
                                                style="position: relative;">
                                                <div class="table-info required">
                                                    <label for="txt_tes_Totalprice" class="field-label">Total
                                                        Price</label>
                                                </div>
                                                <div class="control">
                                                    <div style="position:relative">
                                                        <input type="text" id="txt_tes_Totalprice"
                                                            style="padding:16px; margin:10px 0px;"
                                                            class="aspNetDisabled text form-control lookup form-control "
                                                            readonly="" aria-readonly="true" disabled="">
                                                    </div>
                                                </div>
                                            </td>
                                            <td data-highlightable="1" colspan="1" rowspan="1" data-format-type="None"
                                                data-entity-form-field-pcf-enabled="false"
                                                class="clearfix cell text form-control-cell"
                                                style="position: relative;">

                                            </td>

                                        </tr>



                                    </tbody>
                                </table>

                                <label hidden="" for="txt_SESSIONID">SESSIONID</label><input hidden="" type="text"
                                    id="txt_SESSIONID" name="txt_SESSIONID"><br><br>


                                <div id="embed-target"
                                    style="width: 100%; max-height: 500px; overflow: hidden; transition: max-height 0.5s ease-out 0s;">
                                    <iframe id="hc-comms-layer-iframe" allow="payment"
                                        title="Payment Page Embedded In Frame"
                                        src="https://paymentgateway.commbank.com.au/static/checkout/landing/index.html"
                                        style="z-index: 9999; display: block; background-color: transparent; border: 0px none transparent; overflow: hidden; visibility: visible; margin: 0px; padding: 0px; height: 500px; width: 100%; min-height: 668px;"
                                        scrolling="no" class=""></iframe>
                                </div>
                                <div id="receiptContainer" style="width:100%"></div>

                                <input type="button"
                                    style="background-color: rgb(50, 49, 48); color: rgb(255, 255, 255); cursor: pointer; font-weight: bold; height: 40px; visibility: hidden;"
                                    class="btn btn-primary" id="btnEmbedpayment" value="Pay Now"
                                    onclick="showEmbeddedPage(document.getElementById('txt_SESSIONID').value);">
                                <input type="button" class="btn btn-primary" hidden="" value="Pay with Payment Page"
                                    onclick="showEmbeddedPage(document.getElementById('txt_SESSIONID').value);">
                                <div class="row sectionBlockLayout text-start"
                                    style="display: flex; flex-wrap: wrap; margin: 0px; min-height: auto; padding: 8px;">
                                    <div class="container" style="padding: 0px; display: flex; flex-wrap: wrap;">
                                        <div class="col-lg-12 columnBlockLayout"
                                            style="flex-grow: 1; display: flex; flex-direction: column; min-width: 250px; word-break: break-word;">
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <script type="text/javascript">
        //<![CDATA[
        $(document).ready(function () {
            $('.wrapper-body').addClass('step-template');
        });
        //]]>
    </script>















    <script>

        //Relete this once Function App is implemented
        function Verify() {
            fetch('https://prod-19.australiasoutheast.logic.azure.com:443/workflows/9cef09b1f80c45f6bb13fee5cab95a90/triggers/manual/paths/invoke?api-version=2016-06-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=29ClWG9xVdMhYaoM4GMkmojzZvan-l28JpbV2mhkMG4', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    "apiOperation": "INITIATE_CHECKOUT",
                    "interaction": {
                        "operation": "VERIFY",
                        "merchant": {
                            "name": "MAIN ROADS WESTERN AUSTRALIA"
                        }
                    },
                    "order": {
                        "currency": "AUD",
                        "amount": document.getElementById('txt_tes_Totalprice').value,
                        "id": document.getElementById('txt_tes_invoiceno').value,
                        "description": document.getElementById('txt_tes_WorkOrderNo').value
                    }
                })
            })
                .then(body => { //response.json(); 
                    console.log(body)
                }
                )
                .then(response => { //response.json(); 
                    console.log(response)
                }
                )
                .then(data => {
                    console.log(data)
                    //document.getElementById('txt_tes_WorkOrderNo').value=data.session.id
                }
                )
                .catch(error => console.error('Error:', error));

        }


        async function GetSessionID() {
            const url = "https://prod-19.australiasoutheast.logic.azure.com:443/workflows/9cef09b1f80c45f6bb13fee5cab95a90/triggers/manual/paths/invoke?api-version=2016-06-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=29ClWG9xVdMhYaoM4GMkmojzZvan-l28JpbV2mhkMG4";
            const data = {
                "apiOperation": "INITIATE_CHECKOUT",
                "interaction": {
                    "operation": "PURCHASE", //"VERIFY",
                    "merchant": {
                        "name": "MAIN ROADS WESTERN AUSTRALIA"//,
                        //    ,
                        //"url": "https://tesssbld.powerappsportals.com/"
                        ,
                        // "logo": "https://upload.wikimedia.org/wikipedia/commons/2/21/Verlagsgruppe_Random_House_Logo_2016.png"
                        //"emailContact": ''
                    },
                    "displayControl": {
                        "billingAddress": "HIDE",
                        "customerEmail": "READ_ONLY"//,
                        // "paymentMethodDisplay": {
                        //         "visa": "show",
                        //       "mastercard": "show",
                        //       "amex": "show",
                        //   "dinersclub": "HIDE"//,
                        //       "discover": "show",
                        //       "jcb": "show",
                        //       "maestro": "show"
                        //        }
                    }
                },
                "order": {
                    "currency": "AUD",
                    "amount": document.getElementById('txt_tes_Totalprice').value,
                    "id": document.getElementById('txt_tes_invoiceno').value,
                    "description": document.getElementById('txt_tes_WorkOrderNo').value
                },
                "customer": {
                    "email": "steven.green@insight.com",
                    "firstName": "Steven",
                    "lastName": "Green"
                    //,
                    //"mobilePhone": "+1 5557891230",
                    // "phone": "+1 1234567890"
                }
                //,
                //"displayControl": {
                //"billingAddress": "HIDE",
                //"customerEmail": "MANDATORY"
                //}
            };

            try {
                const response = await fetch(url, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(data)
                });

                if (response.ok) {
                    const result = await response.text();
                    console.log("Response:", result);
                    let d = JSON.parse(result)
                    //document.getElementById("response").innerText = result;
                    document.getElementById('txt_SESSIONID').value = d.session.id;
                    //Checkout.showEmbeddedPage('#receiptContainer');
                } else {
                    console.error("HTTP Error:", response.status, response.statusText);
                }
            } catch (error) {
                console.error("Fetch Error:", error);
            }
        }



        function roundToTwo(num) {
            return +(Math.round(num + "e+2") + "e-2");
        }


        document.addEventListener("DOMContentLoaded", function (event) {
            // alert("Your page is loaded");
            // document.getElementById("txtWorkOrderId").value = '52e6ac85-6142-ef11-a316-002248126705';
            document.getElementById("txt_tes_subtotalprice").value = parseFloat(11700.0000000000).toFixed(2);
            document.getElementById("txt_tes_invoiceno").value = 'INV0000212';

            document.getElementById("txt_tes_WorkOrderNo").value = 'WO0050084';
            document.getElementById("txt_tes_Gst").value = parseFloat(1170.0000000000).toFixed(2);
            document.getElementById("txt_tes_Totalprice").value = parseFloat(12870.0000000000).toFixed(2);

            GetSessionID();


            //do work
        });

    </script>

</main>

</main><!-- Closing main element -->
<footer role="contentinfo" class="footer">
  <div class="footer-content">
    <!-- Acknowledgment of Country -->
    <div class="footer-acknowledgment">
      <p>The ABC acknowledges the Traditional Owners and Custodians of Country throughout Australia. We acknowledge their continuing connection to land, waters and community. We pay our respects to the people, the cultures and the Elders, past and present.</p>
    </div>

    <!-- Footer Menu and Social -->
    <div class="footer-menu-wrapper">
      <nav aria-label="Footer navigation">
        <ul class="footer-menu">
          <li><a href="#">Contact us</a></li>
          <li><a href="#">General terms and conditions</a></li>
          <li><a href="#">Feedback and complaints</a></li>
          <li><a href="#">Copyright</a></li>
          <li><a href="#">Disclaimer</a></li>
          <li><a href="#">About us</a></li>
          <li><a href="#">Site map</a></li>
        </ul>
      </nav>

      <!-- Social Media Icons -->
      <div class="footer-social" aria-label="Social media links">
        <a href="https://www.linkedin.com" target="_blank" rel="noopener noreferrer" aria-label="Visit us on LinkedIn">
          <i class="fab fa-linkedin"></i>
        </a>
        <a href="https://twitter.com" target="_blank" rel="noopener noreferrer" aria-label="Visit us on Twitter X">
          <i class="fab fa-x-twitter"></i>
        </a>
        <a href="https://www.youtube.com" target="_blank" rel="noopener noreferrer" aria-label="Visit us on Youtube">
          <i class="fab fa-youtube"></i>
        </a>
      </div>
    </div>
  </div>

  <!-- Back to Top Button -->
  <a href="#" class="back-to-top" aria-label="Back to top">
    <svg viewBox="0 0 18 10" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M1 9L9 1L17 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </a>
</footer>
<script src="https://content.powerapps.com/resource/powerappsportal/dist/bootstrap.BootstrapV5.bundle-be8391e97d.js"
    type="text/javascript"></script>

<script src="https://content.powerapps.com/resource/powerappsportal/dist/postpreform.BootstrapV5.bundle-11a5a91493.js"
    type="text/javascript"></script>

<script src="https://content.powerapps.com/resource/powerappsportal/dist/app.BootstrapV5.bundle-7aa0129ad7.js"
    type="text/javascript"></script>

<script
    src="https://content.powerapps.com/resource/powerappsportal/dist/default-1033.moment_2_29_4.bundle-eda4e638fd.js"
    type="text/javascript"></script>
<script
    src="https://content.powerapps.com/resource/powerappsportal/dist/default-1033.moment_2_29_4.bundle-eda4e638fd.js"
    type="text/javascript"></script>


<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.2.2/js/bootstrap.min.js"
    integrity="sha512-5BqtYqlWfJemW5+v+TZUs22uigI8tXeVah5S/1Z6qBLVO7gakAOtkOzUtgq6dsIo5c0NJdmGPs0H9I+2OHUHVQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script> -->


<script type="text/javascript">
    window.onload = function () {
        if (window.navigator.appName == "Microsoft Internet Explorer" || window.navigator.userAgent.indexOf("Trident") > 0) {
            var searchElement = document.getElementById("search");
            if (searchElement != null) searchElement.setAttribute("href", "");
        }
    };
    function setHeight() {
        var windowHeight = window.innerHeight - 140;
        var navbar = document.getElementById("navbar");
        if (navbar) {
            navbar.style.maxHeight = windowHeight + "px";
        }
    }
    window.addEventListener('resize', function (event) {
        setHeight();
    });
</script>

<script src="js/main.js"></script>
</body>

</html>